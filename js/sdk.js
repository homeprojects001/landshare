(()=>{"use strict";var e;!function(e){e.START_APPLICATION="START_APPLICATION",e.CREATE_REDIRECT="CREATE_REDIRECT",e.TARGET_ADDRESS_ENTERED="TARGET_ADDRESS_ENTERED",e.CLOSE_WIDGET="CLOSE_WIDGET"}(e||(e={}));var i=[e.TARGET_ADDRESS_ENTERED],t=function(){return t=Object.assign||function(e){for(var i,t=1,n=arguments.length;t<n;t++)for(var a in i=arguments[t])Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a]);return e},t.apply(this,arguments)};window.SwipeluxWidget=function(n,a,r){var o=this;this.rootElement=n,this.settings=a,this.listener=r,this.init=function(n){var a=(new Date).getTime();if(o.isInitialized)throw Error("Widget is already initialized");window.addEventListener("message",(function(t){var n;if(o.widgetURL.includes(t.origin)&&(t.data.type===e.CREATE_REDIRECT&&t.data.payload.url&&window.open(t.data.payload.url,"_self"),t.data.type===e.CLOSE_WIDGET&&(o.rootElement.innerHTML="",o.iframe=null),t.data.type&&Object.keys(i).includes(t.data.type))){var a=t.data;null===(n=o.listener)||void 0===n||n.call(o,a)}}));var r=n||o.settings,s={screenWidth:window.innerWidth,screenHeight:window.innerHeight,merchantUrl:window.location.host,initTimestamp:a},l=o.createIframe(),d=o.widgetURL,E=t(t({},r),{analyticsInfo:s});l.onload=function(){var i,t={type:e.START_APPLICATION,payload:E};null===(i=l.contentWindow)||void 0===i||i.postMessage(t,d)},o.rootElement.appendChild(l),o.isInitialized=!0},this.updateSettings=function(e){if(!o.iframe||!o.isInitialized)throw Error("Widget is not initialized");o.iframe.remove(),o.iframe=null,o.isInitialized=!1,o.settings=e,o.init(e)},this.createIframe=function(){if(o.iframe)return o.iframe;var e=document.createElement("iframe");return new ResizeObserver((function(){var e,i=null===(e=o.rootElement.parentElement)||void 0===e?void 0:e.offsetWidth;if(o.iframe)if(i&&i<=400){var t=i>=320?i:320;o.iframe.style.width="".concat(t,"px")}else o.iframe.style.width="400px"})).observe(document.body),e.src="".concat(o.widgetURL,"?api-key=").concat(o.settings.apiKey),e.style.border="none",e.style.height="602px",e.style.width="400px",e.style.borderRadius="24px",e.allow="camera *;microphone *; clipboard-read; clipboard-write",o.iframe=e,e},this.iframe=null,this.isInitialized=!1,this.widgetURL="https://app.swipelux.com/"}})();